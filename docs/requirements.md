# VisitPro - 智能客户拜访管理系统 需求说明书 (V1.2)

## 1. 项目背景
VisitPro 是一款针对外勤销售和客户经理设计的智能化 CRM 辅助工具。通过集成 Google Gemini 3 与 DeepSeek AI，系统能够实现从语音录入到专业报告生成的自动化全流程，解决拜访记录碎片化、整理负担重、跟进不及时的痛点。

## 2. 目标用户
*   **销售/客户经理**：核心使用者，负责记录拜访细节、生成摘要及发送跟进邮件。
*   **团队管理者**：查看团队业绩看板，分析客户情绪分布。
*   **系统管理员**：配置企业级参数（AI 密钥、服务器地址、自定义数据维度）。

## 3. 功能需求

### 3.1 仪表盘 (Dashboard)
*   **多维数据看板**：实时展示客户总数、本月拜访频次、积极结果转化率及高风险（需关注）客户数。
*   **活动趋势分析**：通过周活柱状图（Web 采用 Recharts，小程序采用轻量化 CSS 渲染）展示业务分布。
*   **团队业绩榜**：按拜访量和成功率对团队成员进行排名，激励销售转化。
*   **快捷追踪**：最近 5 条记录的磁贴式预览，支持一键进入详情。

### 3.2 客户资产管理 (Client CRM)
*   **全生命周期状态**：支持活跃 (Active)、潜在 (Lead)、流失 (Churned) 三种状态管理。
*   **国标行业分类**：集成 20 个标准行业门类选择器。
*   **动态扩展维度**：支持管理员自定义“职位”、“预算”、“语言”等无限扩展字段。
*   **移动端适配**：支持模糊检索及 iOS 风格的滑动操作手感。

### 3.3 智能化拜访管理 (Intelligent Visit Manager)
*   **混合录入模式**：
    *   **全屏焦点模式**：提供免干扰的笔记编辑环境。
    *   **多模型语音处理**：Gemini-3-Flash 直读音频生成报告；DeepSeek 模式下配合讯飞接口进行高精度转写。
*   **AI 深度洞察 (Smart Insight)**：
    *   **智能摘要**：将琐碎笔记转化为专业 CRM 格式。
    *   **情绪度量**：利用 LLM 分析客户潜在的情绪倾向。
    *   **痛点/行动项提取**：自动剥离客户核心挑战并列出待办清单 (To-do List)。
*   **草稿保护机制**：支持本地 1 秒级自动保存，防止因意外关屏导致的数据丢失。
*   **双视图切换**：提供标准列表视图与日期聚合的日历视图。
*   **跟进自动化**：一键生成分语气（正式/亲切/简洁）的跟进邮件草案。

### 3.4 企业级后台管理 (Admin Panel)
*   **动态字段引擎**：可对“客户”、“拜访”、“用户”三个核心对象实时增加动态属性。
*   **AI 模型中枢**：支持 Gemini 与 DeepSeek 自由切换及 API 密钥安全配置。
*   **存储冗余与迁移**：
    *   **本地优先**：LocalStorage 确保数据在离线状态下可用。
    *   **备份恢复**：支持全量数据的 JSON 导入导出。
    *   **远程预留**：提供 MySQL 连接测试界面，为后端同步做准备。
*   **权限管理**：区分管理员与普通用户角色，控制系统敏感配置权限。

## 4. 界面与适配需求
*   **iPhone 15 Pro Max 适配**：必须处理灵动岛 (Safe Area Top) 与 底部横条 (Safe Area Bottom) 的间距，采用 `viewport-fit=cover` 全屏显示。
*   **交互性能**：小程序端需通过 CSS 动画代替 JS 动画，确保在大屏幕高清渲染下的流畅度。
